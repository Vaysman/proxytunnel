--- a/Makefile
+++ b/Makefile
@@ -25,8 +25,10 @@
 # Most systems
 OPTFLAGS += -DSETPROCTITLE -DSPT_TYPE=2
 
-# Comment if you don't have this flag
-OPTFLAGS += -DSO_REUSEPORT
+# This should not be here at all, as the system library #define's this
+# if it exists
+# # Comment if you don't have this flag
+# OPTFLAGS += -DSO_REUSEPORT
 
 # System dependant blocks... if your system is listed below, uncomment
 # the relevant lines
@@ -84,7 +86,7 @@
 	$(MAKE) -C docs
 
 proxytunnel: $(OBJ)
-	$(CC) -o $(name) $(CFLAGS) $(OPTFLAGS) $(OBJ) $(LDFLAGS)
+	$(CC) -o $(name) $(CPPFLAGS) $(CFLAGS) $(OPTFLAGS) $(OBJ) $(LDFLAGS)
 
 clean:
 	@rm -f $(name) $(OBJ)
@@ -95,7 +97,7 @@
 	$(MAKE) -C docs install
 
 .c.o:
-	$(CC) $(CFLAGS) $(OPTFLAGS) -c -o $@ $<
+	$(CC) $(CPPFLAGS) $(CFLAGS) $(OPTFLAGS) -c -o $@ $<
 
 dist: clean docs
 	sed -i -e 's/^Version:.*$$/Version: $(version)/' contrib/proxytunnel.spec
