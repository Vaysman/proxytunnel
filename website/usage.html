<HTML>

<HEAD>
	<LINK REL=stylesheet HREF="stylesheet.css" TYPE="text/css">
	<TITLE>ProxyTunnel: Punching holes in the corporate firewall</TITLE>
</HEAD>

<BODY>
<P CLASS=title>Using ProxyTunnel</P>
The document below is a brief overview of the command-line options supported in
proxytunnel. If you are looking for a more in-depth article about the features
of proxytunnel, and what concequences using it brings along, please read
<A HREF="papers/muppet-200204.html">Muppet's paper here</A>.

<P>Proxytunnel is very easy to use, when running proxytunnel with the help
option it specifies it's commandline options.</P>

<PRE>
# proxytunnel --help
Proxytunnel 1.0.5
Jos Visser (Muppet) <josv@osp.nl>, Mark Janssen (Maniac) <maniac@maniac.nl>

Purpose:
  Build generic tunnels trough HTTPS proxy's, supports HTTP authorization

Usage: Proxytunnel [OPTIONS]...
   -h         --help              Print help and exit
   -V         --version           Print version and exit
   -i         --inetd             Run from inetd (default=off)
   -u STRING  --user=STRING       Username to send to HTTPS proxy for auth
   -s STRING  --pass=STRING       Password to send to HTTPS proxy for auth
   -g STRING  --proxyhost=STRING  HTTPS Proxy host to connect to
   -G INT     --proxyport=INT     HTTPS Proxy portnumber to connect to
   -d STRING  --desthost=STRING   Destination host to built the tunnel to
   -D INT     --destport=INT      Destination portnumber to built the tunnel to
   -v         --verbose           Turn on verbosity (default=off)
</PRE>

To use this program with OpenSSH to connect to a host somewhere, create
a $HOME/.ssh/config file with the following content:

<PRE>
	Host foobar
		ProtocolKeepAlives 30
		ProxyCommand /path/to/proxytunnel -g proxy.customer.com -G 8080 -u user -s password -d mybox.athome.nl -D 443
</PRE>

With:

<TABLE BORDER=1>
	<TR><TD>foobar</TD><TD>The symbolic name of the host you want to connect to</TD></TR>
	<TR><TD>proxy.customer.com</TD><TD>The host name of the proxy you want to connect through</TD></TR>
	<TR><TD>8080</TD><TD>The port number where the proxy software listens to</TD></TR>
	<TR><TD>user</TD><TD>Your proxy userid</TD></TR>
	<TR><TD>password</TD><TD>Your proxy password</TD></TR>
	<TR><TD>mybox.athome.nl</TD><TD>The hostname of the box you want to connect to (ultimately)</TD></TR>
	<TR><TD>443</TD><TD>The port number of the SSH daemon on mybox.athome.nl</TD></TR>
</TABLE></P>

<P>If your proxy doesn't require the username and password for using it,
you can skip these options.<P>

<P>The ProtocolKeepAlives line is used to send occasional NULL packets (if your SSH version supports this). This is used to keep the connection up, since HTTPS proxy's will usually drop the connection if it remains idle for some time. Experiment with the time between the NULL packets (in seconds)</P>

<P>Most HTTPS proxies do not allow access to ports other than 443 (HTTPS)
and 563 (SNEWS), so some hacking is necessary to start the SSH daemon on
the required port. (On the server side add an extra Port statement in
the sshd_config file)</P>

<P>When all this is in place, execute an "ssh foobar" and you're in business!</P>

<P>Share and Enjoy!</P>

</BODY>
</HTML>
